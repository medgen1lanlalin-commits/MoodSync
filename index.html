MoodSync/
â”‚
â”œâ”€â”€ frontend_flutter/
â”‚   â”œâ”€â”€ pubspec.yaml
â”‚   â””â”€â”€ lib/
â”‚       â”œâ”€â”€ main.dart
â”‚       â”œâ”€â”€ theme.dart
â”‚       â”œâ”€â”€ models.dart
â”‚       â”œâ”€â”€ home_screen.dart
â”‚       â”œâ”€â”€ mood_tracker.dart
â”‚       â”œâ”€â”€ food_logger.dart
â”‚       â””â”€â”€ insights_screen.dart
â”‚
â””â”€â”€ backend_fastapi/
    â”œâ”€â”€ requirements.txt
    â””â”€â”€ main.py
from fastapi import FastAPI
from pydantic import BaseModel
from typing import List
from datetime import datetime, timedelta
import pandas as pd
import numpy as np

app = FastAPI(title="MoodSync AI Engine")

# -----------------------------
# Data Models
# -----------------------------

class MoodEntry(BaseModel):
    timestamp: datetime
    mood_score: int  # 1-5

class FoodEntry(BaseModel):
    timestamp: datetime
    nutrients: List[str]  # ["High Sugar", "Magnesium", ...]

class AnalysisRequest(BaseModel):
    moods: List[MoodEntry]
    foods: List[FoodEntry]

# -----------------------------
# Utility Functions
# -----------------------------

def detect_sugar_crash(food, moods):
    """
    Detect if high sugar leads to mood drop in 3-4 hours
    """
    crash_detected = False

    for m in moods:
        delta = (m.timestamp - food.timestamp).total_seconds() / 3600

        # 1-2 hours high mood
        if 1 <= delta <= 2 and m.mood_score >= 4:
            # check later drop
            for later_mood in moods:
                delta2 = (later_mood.timestamp - food.timestamp).total_seconds() / 3600
                if 3 <= delta2 <= 4 and later_mood.mood_score <= 2:
                    crash_detected = True

    return crash_detected


def calculate_food_mood_index(foods, moods):
    """
    Calculate correlation between nutrients and mood
    """

    results = {}

    for food in foods:
        for nutrient in food.nutrients:
            mood_after = []

            for m in moods:
                delta = (m.timestamp - food.timestamp).total_seconds() / 3600
                if 1 <= delta <= 4:
                    mood_after.append(m.mood_score)

            if mood_after:
                avg_mood = np.mean(mood_after)

                if nutrient not in results:
                    results[nutrient] = []

                results[nutrient].append(avg_mood)

    # Final average per nutrient
    final_scores = {}
    for nutrient, values in results.items():
        final_scores[nutrient] = round(float(np.mean(values)), 2)

    return final_scores


# -----------------------------
# API Endpoint
# -----------------------------

@app.post("/analyze")
def analyze(data: AnalysisRequest):

    moods = data.moods
    foods = data.foods

    # Food-Mood Index
    index = calculate_food_mood_index(foods, moods)

    # Sugar Crash Detection
    sugar_crashes = 0
    for food in foods:
        if "High Sugar" in food.nutrients:
            if detect_sugar_crash(food, moods):
                sugar_crashes += 1

    return {
        "food_mood_index": index,
        "sugar_crash_count": sugar_crashes
    }
cd backend_fastapi
pip install -r requirements.txt
uvicorn main:app --reload
name: mood_sync
description: MoodSync App

environment:
  sdk: ">=2.17.0 <3.0.0"

dependencies:
  flutter:
    sdk: flutter
  http: ^0.13.5
  intl: ^0.18.0
import 'package:flutter/material.dart';

class AppTheme {
  static const primaryPink = Color(0xFFF8C8DC);
  static const softRose = Color(0xFFFADADD);
  static const cream = Color(0xFFFFF6F9);
  static const accentLavender = Color(0xFFE6CCFF);

  static ThemeData lightTheme = ThemeData(
    scaffoldBackgroundColor: cream,
    primaryColor: primaryPink,
    appBarTheme: const AppBarTheme(
      backgroundColor: primaryPink,
      foregroundColor: Colors.white,
      centerTitle: true,
    ),
    cardTheme: CardTheme(
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.circular(20),
      ),
      elevation: 4,
    ),
  );
}
class MoodEntry {
  String timestamp;
  int moodScore;

  MoodEntry({required this.timestamp, required this.moodScore});

  Map<String, dynamic> toJson() {
    return {
      "timestamp": timestamp,
      "mood_score": moodScore,
    };
  }
}

class FoodEntry {
  String timestamp;
  List<String> nutrients;

  FoodEntry({required this.timestamp, required this.nutrients});

  Map<String, dynamic> toJson() {
    return {
      "timestamp": timestamp,
      "nutrients": nutrients,
    };
  }
}
import 'package:flutter/material.dart';
import 'theme.dart';
import 'home_screen.dart';

void main() {
  runApp(const MoodSyncApp());
}

class MoodSyncApp extends StatelessWidget {
  const MoodSyncApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: "MoodSync",
      theme: AppTheme.lightTheme,
      home: const HomeScreen(),
    );
  }
}
import 'package:flutter/material.dart';
import 'mood_tracker.dart';
import 'food_logger.dart';
import 'insights_screen.dart';

class HomeScreen extends StatelessWidget {
  const HomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text("ğŸŒ¸ MoodSync")),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            ElevatedButton(
              child: const Text("à¸šà¸±à¸™à¸—à¸¶à¸à¸­à¸²à¸£à¸¡à¸“à¹Œ"),
              onPressed: () {
                Navigator.push(context,
                    MaterialPageRoute(builder: (_) => const MoodTracker()));
              },
            ),
            ElevatedButton(
              child: const Text("à¸šà¸±à¸™à¸—à¸¶à¸à¸­à¸²à¸«à¸²à¸£"),
              onPressed: () {
                Navigator.push(context,
                    MaterialPageRoute(builder: (_) => const FoodLogger()));
              },
            ),
            ElevatedButton(
              child: const Text("à¸”à¸¹ AI Insights"),
              onPressed: () {
                Navigator.push(context,
                    MaterialPageRoute(builder: (_) => const InsightsScreen()));
              },
            ),
          ],
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';
import 'models.dart';
import 'dart:convert';
import 'package:http/http.dart' as http;

class MoodTracker extends StatefulWidget {
  const MoodTracker({super.key});

  @override
  State<MoodTracker> createState() => _MoodTrackerState();
}

class _MoodTrackerState extends State<MoodTracker> {
  int selectedMood = 3;

  void saveMood() {
    final mood = MoodEntry(
      timestamp: DateTime.now().toIso8601String(),
      moodScore: selectedMood,
    );

    print(jsonEncode(mood.toJson()));

    ScaffoldMessenger.of(context).showSnackBar(
      const SnackBar(content: Text("à¸šà¸±à¸™à¸—à¸¶à¸à¸­à¸²à¸£à¸¡à¸“à¹Œà¹à¸¥à¹‰à¸§ ğŸŒ¸")),
    );
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text("Mood Tracker")),
      body: Column(
        mainAxisAlignment: MainAxisAlignment.center,
        children: [
          const Text("à¸§à¸±à¸™à¸™à¸µà¹‰à¸£à¸¹à¹‰à¸ªà¸¶à¸à¸­à¸¢à¹ˆà¸²à¸‡à¹„à¸£?"),
          Slider(
            value: selectedMood.toDouble(),
            min: 1,
            max: 5,
            divisions: 4,
            label: selectedMood.toString(),
            onChanged: (value) {
              setState(() {
                selectedMood = value.toInt();
              });
            },
          ),
          ElevatedButton(
            onPressed: saveMood,
            child: const Text("à¸šà¸±à¸™à¸—à¸¶à¸"),
          )
        ],
      ),
    );
  }
}
{
  "moods": [
    {"timestamp": "2026-02-10T13:00:00", "mood_score": 5},
    {"timestamp": "2026-02-10T16:00:00", "mood_score": 2}
  ],
  "foods": [
    {"timestamp": "2026-02-10T12:00:00", "nutrients": ["High Sugar"]}
  ]
}
{
  "food_mood_index": {
    "High Sugar": 3.5
  },
  "sugar_crash_count": 1
}
